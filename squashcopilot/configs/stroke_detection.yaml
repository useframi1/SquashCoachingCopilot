# Stroke Detection Configuration
# Configuration for detecting stroke types using LSTM-based pose analysis

# Inference Configuration
inference:
    method: lstm
    model_path: squashcopilot/modules/stroke_detection/model/weights/stroke_lstm_best.pt

# Normalization Settings
normalization:
    method: hip_torso # Normalization method: relative to hip center and torso length
    min_torso_length: 1.0e-6 # Minimum torso length to avoid division by zero

# Annotation Settings (for generating training data from raw annotations)
annotation:
    video_name: video-1 # Name of the video to annotate (e.g., video-1, video-2, etc.)
    annotations_dir: squashcopilot/annotation/annotations # Directory containing annotation folders
    output_dir: squashcopilot/modules/stroke_detection/stroke_annotations # Directory to save annotated stroke data

# Training Configuration
training:
    data_dir: squashcopilot/modules/stroke_detection/tests/data # Directory with windowed training data (video-level organization)
    model_save_dir: squashcopilot/modules/stroke_detection/model/weights # Directory to save trained models
    sequence_length: 31 # Total sequence length (centered on racket hit: ±15 frames + 1)
    num_features: 24 # Number of input features (12 keypoints × 2 coordinates)
    train_test_split: 0.8 # Train/test split ratio (applied at video level)
    validation_split: 0.1 # Validation split from training data (applied at video level)
    batch_size: 32
    epochs: 100
    learning_rate: 0.001
    model:
        hidden_size: 128
        num_layers: 2 # Number of LSTM layers
        dropout: 0.3

tests:
    video_name: video-3 # Video to evaluate on
    video_dir: squashcopilot/videos # Directory containing video files
    data_dir: squashcopilot/modules/stroke_detection/tests/data # Directory with test annotations
    output_dir: squashcopilot/modules/stroke_detection/tests/outputs # Directory to save evaluation results
    create_video: true # Whether to create annotated video with predictions
